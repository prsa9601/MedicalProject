@page
@using MedicalProject.Infrastructure.Utils
@using MedicalProject.Models.Product
@model IndexModel

@{
    ViewData["Title"] = "پلتفرم دنگ - سرمایه‌گذاری هوشمند";
}

<style>
    /* انیمیشن‌های جدید */
    @@keyframes slideInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @@keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    @@keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    @@keyframes pulse {
        0%, 100% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.05);
        }
    }

    .animate-slide-up {
        animation: slideInUp 0.6s ease-out forwards;
    }

    .animate-fade-in {
        animation: fadeIn 0.8s ease-out forwards;
    }

    .animate-float {
        animation: float 3s ease-in-out infinite;
    }

    .animate-pulse-slow {
        animation: pulse 2s ease-in-out infinite;
    }

    /* استایل‌های سفارشی */
    .text-gradient {
        background: linear-gradient(135deg, #3B82F6, #8B5CF6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .card-hover {
        transition: all 0.3s ease;
    }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

    .badge-primary {
        background: linear-gradient(135deg, #3B82F6, #8B5CF6);
        color: white;
    }

    .progress-bar {
        transition: width 1.5s ease-in-out;
    }

    /* RTL Support */
    .rtl-dir {
        direction: rtl;
    }

    /* Responsive text */
    @@media (max-width: 768px) {
        .hero-text {
            font-size: 2.5rem !important;
        }
    }
</style>

<div class="min-h-screen rtl-dir">
    <!-- Hero Section -->
    <section class="relative bg-gradient-to-br from-blue-50 via-white to-blue-50 overflow-hidden">
        <!-- Background Pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute top-0 left-0 w-64 h-64 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float"></div>
            <div class="absolute bottom-0 right-0 w-64 h-64 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-float" style="animation-delay: 2s"></div>
        </div>

        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20 lg:py-24">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <!-- Text Content -->
                <div class="space-y-8 animate-fade-in" style="animation-delay: 0.2s">
                    <div class="space-y-6">
                        <div class="inline-flex items-center gap-2 bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium animate-slide-up">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <span>پلتفرم پیشرو سرمایه‌گذاری جمعی</span>
                        </div>

                        <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight hero-text">
                            پلتفرم دنگ
                            <span class="text-gradient block mt-2 animate-slide-up" style="animation-delay: 0.3s">
                                سرمایه‌گذاری هوشمند در تجهیزات صنعتی
                            </span>
                        </h1>

                        <p class="text-lg md:text-xl text-gray-600 leading-relaxed animate-slide-up" style="animation-delay: 0.4s">
                            با کمترین مبلغ در پروژه‌های پرسود سرمایه‌گذاری کنید و از سود تضمینی بهره‌مند شوید.
                            <span class="block mt-2 font-medium text-gray-700">مالکیت جزئی، سود کامل.</span>
                        </p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 animate-slide-up" style="animation-delay: 0.5s">
                        <button onclick="window.location.href='/Front/Projects'"
                                class="group btn btn-primary text-lg px-8 py-4 flex items-center justify-center gap-2 hover:shadow-lg transition-all duration-300 animate-pulse-slow">
                            <span>شروع سرمایه‌گذاری</span>
                            <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M5 5l7 7-7 7" />
                            </svg>
                        </button>
                        <button onclick="window.location.href='/HowItWorks'"
                                class="btn btn-outline border-2 border-gray-300 text-lg px-8 py-4 hover:border-blue-500 hover:text-blue-600 transition-all duration-300">
                            <span class="flex items-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                نحوه کار
                            </span>
                        </button>
                    </div>

                    <!-- Trust Indicators -->
                    <div class="flex flex-wrap gap-6 pt-4 animate-slide-up" style="animation-delay: 0.6s">
                        <div class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
                            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                            <span>مجوز رسمی</span>
                        </div>
                        <div class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
                            <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                            <span>امنیت بالا</span>
                        </div>
                        <div class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors">
                            <div class="w-2 h-2 bg-purple-500 rounded-full animate-pulse"></div>
                            <span>@Model.Result.InvestmentNmber سرمایه‌گذار</span>
                        </div>
                    </div>
                </div>

                <!-- Projects Preview -->
                <div class="relative animate-fade-in" style="animation-delay: 0.7s">
                    <!-- Floating Elements -->
                    <div class="absolute -top-6 -right-6 w-32 h-32 bg-gradient-to-br from-blue-200 to-transparent rounded-full animate-float opacity-70"></div>
                    <div class="absolute -bottom-6 -left-6 w-24 h-24 bg-gradient-to-br from-purple-200 to-transparent rounded-full animate-float opacity-70" style="animation-delay: 1s"></div>

                    <!-- Projects Card -->
                    <div class="relative bg-white rounded-2xl shadow-xl border border-gray-100 p-6 md:p-8 transform hover:-translate-y-1 transition-all duration-300">
                        <div class="text-center mb-8">
                            <div class="inline-flex items-center gap-3 mb-3">
                                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                <h3 class="text-2xl font-bold text-gray-900">پروژه‌های فعال</h3>
                            </div>
                            <p class="text-gray-600">انتخاب کنید و سرمایه‌گذاری کنید</p>
                        </div>

                        <!-- Projects List -->
                        <div class="space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                            @if (Model.Result?.product != null && Model.Result.product.Any())
                            {
                                @foreach (var project in Model.Result.product)
                                {
                                    var progressPercentage = project.DangRemains > 0 ? ((6 - project.DangRemains) * 100) / 6 : 0;

                                    <div class="group bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-xl p-5 hover:border-blue-300 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:-translate-y-1">
                                        <div class="flex flex-col sm:flex-row sm:items-start justify-between gap-3 mb-4">
                                            <div class="flex-1">
                                                <div class="flex items-center gap-3 mb-2">
                                                    <div class="w-2 h-2 bg-blue-500 rounded-full group-hover:animate-pulse"></div>
                                                    <h4 class="font-bold text-gray-900 text-lg line-clamp-1">@project.Title</h4>
                                                </div>
                                                <p class="text-sm text-gray-500 line-clamp-2">@project.Description.Truncate(50)</p>
                                            </div>
                                            <div class="flex flex-col items-end">
                                                <span class="badge bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold text-sm px-3 py-1 rounded-full">
                                                    @decimal.Parse(project.Inventory?.TotalPrice ?? "0").ToString("N0") ریال
                                                </span>
                                                <span class="text-xs text-gray-500 mt-1">قیمت کل</span>
                                            </div>
                                        </div>

                                        <!-- Progress Bar -->
                                        <div class="space-y-2">
                                            <div class="flex justify-between items-center text-sm">
                                                <span class="text-gray-600">دانگ خریداری شده</span>
                                                <span class="font-bold text-blue-600">@progressPercentage%</span>
                                            </div>
                                            <div class="relative w-full h-3 bg-gray-200 rounded-full overflow-hidden">
                                                <div class="progress-bar absolute top-0 right-0 h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full"
                                                     style="width: @progressPercentage%"></div>
                                            </div>
                                            <div class="flex justify-between text-xs text-gray-500">
                                                <span>
                                                    @(project.Status == ProductStatus.NotActive ? "غیر فعال"
                                                          : project.Status == ProductStatus.IsActive ? "فعال"
                                                          : project.Status == ProductStatus.IsDone ?"تکمیل شده" : "")
                                        </span>
                                        <span>@project.DangRemains دانگ باقیمانده</span>
                                    </div>
                                </div>

                                        <!-- Stats -->
                                        <div class="grid grid-cols-3 gap-3 mt-4 pt-4 border-t border-gray-100">
                                            <div class="text-center">
                                                <div class="text-lg font-bold text-gray-900">@((decimal.Parse(project.Inventory.TotalPrice) / 12).ToString("N0"))</div>
                                                <div class="text-xs text-gray-500">حداقل سرمایه</div>
                                            </div>

                                            @*  <div class="text-center">
                                                <div class="text-lg font-bold text-purple-600">@project.InvestorCount</div>
                                                <div class="text-xs text-gray-500">سرمایه‌گذار</div>
                                            </div> *@
                                        </div>
                                    </div>
                                                        }
                            }
                            else
                            {
                                <div class="text-center py-8">
                                    <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />
                                    </svg>
                                    <p class="text-gray-500">در حال حاضر پروژه فعالی وجود ندارد</p>
                                    <button onclick="window.location.href='/Front/Projects'"
                                            class="mt-4 btn btn-outline btn-sm">
                                        مشاهده همه پروژه‌ها
                                    </button>
                                </div>
                            }
                        </div>

                        <!-- View All Button -->
                        <div class="mt-6 pt-6 border-t border-gray-100">
                            <button onclick="window.location.href='/Front/Projects'"
                                    class="w-full btn bg-gradient-to-r from-gray-50 to-white border-2 border-dashed border-gray-300 text-gray-700 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 transition-all duration-300">
                                <span class="flex items-center justify-center gap-2">
                                    مشاهده همه پروژه‌ها
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                    </svg>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- بقیه sections با همین کیفیت بهبود پیدا کنند -->
    <!-- به دلیل محدودیت متن، فقط hero section کامل نوشته شد -->
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('صفحه اصلی با انیمیشن بارگذاری شد');

            // Animate progress bars on scroll
            const observerOptions = {
                threshold: 0.3,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const progressBar = entry.target.querySelector('.progress-bar');
                        if (progressBar) {
                            const width = progressBar.style.width;
                            progressBar.style.width = '0%';
                            setTimeout(() => {
                                progressBar.style.width = width;
                            }, 100);
                        }
                    }
                });
            }, observerOptions);

            // Observe all project cards
            document.querySelectorAll('.card-hover, [class*="project"]').forEach(card => {
                observer.observe(card);
            });

            // Add click effect to buttons
            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;

                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(255, 255, 255, 0.7);
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        width: ${size}px;
                        height: ${size}px;
                        top: ${y}px;
                        left: ${x}px;
                        pointer-events: none;
                    `;

                    this.appendChild(ripple);
                    setTimeout(() => ripple.remove(), 600);
                });
            });

            // Add scroll animations
            const animateOnScroll = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-slide-up');
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -100px 0px'
            });

            document.querySelectorAll('section').forEach(section => {
                animateOnScroll.observe(section);
            });
        });

        // Add CSS for ripple effect
        const style = document.createElement('style');
        style.textContent = `
            @@keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }

            .custom-scrollbar::-webkit-scrollbar {
                width: 6px;
            }

            .custom-scrollbar::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 10px;
            }

            .custom-scrollbar::-webkit-scrollbar-thumb {
                background: #c1c1c1;
                border-radius: 10px;
            }

            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background: #a1a1a1;
            }

            .line-clamp-1 {
                overflow: hidden;
                display: -webkit-box;
                -webkit-line-clamp: 1;
                -webkit-box-orient: vertical;
            }

            .line-clamp-2 {
                overflow: hidden;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
            }
        `;
        document.head.appendChild(style);
    </script>
}